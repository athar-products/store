<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅุชูุงู ุงูุดุฑุงุก</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="images/logo.jpg" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="main-header">
        <div class="logo-name">
            <img src="images/logo.jpg" alt="ุดุนุงุฑ ุงููุชุฌุฑ" class="logo">
            <span class="store-name">ATHAR</span>
        </div>
        <nav class="main-nav">
            <ul class="nav-links">
                <li><a href="index.html">ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="about.html">ูู ูุญู</a></li>
                <li><a href="contact.html">ุงุชุตู ุจูุง</a></li>
            </ul>
        </nav>
        <div class="cart-and-hamburger">
            <a href="cart.html" class="cart-icon-link">
                <i class="fas fa-shopping-cart cart-icon"></i>
                <span class="cart-count">0</span>
            </a>
            <button class="hamburger-menu" aria-label="ูุงุฆูุฉ ุงูุชููู">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <main class="checkout-page">
        <div class="checkout-container">
            <form id="checkoutForm">
                <section class="form-section">
                    <h2>ูุนูููุงุช ุงูุนููู</h2>
                    <div class="form-group">
                        <label for="firstName">ุงูุงุณู ู ุงูููุจ:</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">ุฑูู ุงููุงุชู:</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="secondaryPhone">ุฑูู ุงุญุชูุงุทู (ุงุฎุชูุงุฑู):</label>
                        <input type="tel" id="secondaryPhone" name="secondaryPhone">
                    </div>
                </section>

                <section class="form-section">
                    <h2>ุนููุงู ุงูุชูุตูู</h2>
                    <div class="form-group">
                        <label for="wilaya">ุงูููุงูุฉ:</label>
                        <select id="wilaya" name="wilaya" required>
                            <option value="">ุงุฎุชุฑ ุงูููุงูุฉ</option>
                            <option value="Adrar">ุฃุฏุฑุงุฑ</option>
                            <option value="Chlef">ุงูุดูู</option>
                            <option value="Laghouat">ุงูุฃุบูุงุท</option>
                            <option value="Oum El Bouaghi">ุฃู ุงูุจูุงูู</option>
                            <option value="Batna">ุจุงุชูุฉ</option>
                            <option value="Bejaia">ุจุฌุงูุฉ</option>
                            <option value="Biskra">ุจุณูุฑุฉ</option>
                            <option value="Bechar">ุจุดุงุฑ</option>
                            <option value="Blida">ุงูุจููุฏุฉ</option>
                            <option value="Bouira">ุงูุจููุฑุฉ</option>
                            <option value="Tamanrasset">ุชููุฑุงุณุช</option>
                            <option value="Tebessa">ุชุจุณุฉ</option>
                            <option value="Tlemcen">ุชููุณุงู</option>
                            <option value="Tiaret">ุชูุงุฑุช</option>
                            <option value="Tizi Ouzou">ุชูุฒู ูุฒู</option>
                            <option value="Alger">ุงูุฌุฒุงุฆุฑ</option>
                            <option value="Djelfa">ุงูุฌููุฉ</option>
                            <option value="Jijel">ุฌูุฌู</option>
                            <option value="Sรฉtif">ุณุทูู</option>
                            <option value="Saida">ุณุนูุฏุฉ</option>
                            <option value="Skikda">ุณูููุฏุฉ</option>
                            <option value="Sidi Bel Abbรจs">ุณูุฏู ุจูุนุจุงุณ</option>
                            <option value="Annaba">ุนูุงุจุฉ</option>
                            <option value="Guelma">ูุงููุฉ</option>
                            <option value="Constantine">ูุณูุทููุฉ</option>
                            <option value="Medea">ุงููุฏูุฉ</option>
                            <option value="Mostaganem">ูุณุชุบุงูู</option>
                            <option value="M'Sila">ุงููุณููุฉ</option>
                            <option value="Mascara">ูุนุณูุฑ</option>
                            <option value="Ouargla">ูุฑููุฉ</option>
                            <option value="Oran">ููุฑุงู</option>
                            <option value="El Bayadh">ุงูุจูุถ</option>
                            <option value="Illizi">ุฅูููุฒู</option>
                            <option value="Bordj Bou Arreridj">ุจุฑุฌ ุจูุนุฑูุฑูุฌ</option>
                            <option value="Boumerdes">ุจููุฑุฏุงุณ</option>
                            <option value="El Tarf">ุงูุทุงุฑู</option>
                            <option value="Tindouf">ุชูุฏูู</option>
                            <option value="Tissemsilt">ุชูุณูุณููุช</option>
                            <option value="El Oued">ุงููุงุฏู</option>
                            <option value="Khenchela">ุฎูุดูุฉ</option>
                            <option value="Souk Ahras">ุณูู ุฃูุฑุงุณ</option>
                            <option value="Tipaza">ุชูุจุงุฒุฉ</option>
                            <option value="Mila">ูููุฉ</option>
                            <option value="Ain Defla">ุนูู ุงูุฏููู</option>
                            <option value="Naama">ุงููุนุงูุฉ</option>
                            <option value="Ain Temouchent">ุนูู ุชููุดูุช</option>
                            <option value="Ghardaia">ุบุฑุฏุงูุฉ</option>
                            <option value="Relizane">ุบููุฒุงู</option>
                            <option value="Timimoun">ุชูููููู</option>
                            <option value="Bordj Badji Mokhtar">ุจุฑุฌ ุจุงุฌู ูุฎุชุงุฑ</option>
                            <option value="Ouled Djellal">ุฃููุงุฏ ุฌูุงู</option>
                            <option value="Bรฉni Abbรจs">ุจูู ุนุจุงุณ</option>
                            <option value="In Salah">ุนูู ุตุงูุญ</option>
                            <option value="In Guezzam">ุนูู ูุฒุงู</option>
                            <option value="Touggourt">ุชูุฑุช</option>
                            <option value="Djanet">ุฌุงูุช</option>
                            <option value="M'Ghair">ุงููุบูุฑ</option>
                            <option value="Meniaa">ุงููููุนุฉ</option>
                        </select>
                    </div>

                    <div class="radio-group">
                        <label>ุทุฑููุฉ ุงูุชูุตูู:</label>
                        <label>
                            <input type="radio" name="deliveryMethod" value="home" checked>
                            ุงูุชูุตูู ุฅูู ุงูููุฒู
                        </label>
                        <label>
                            <input type="radio" name="deliveryMethod" value="office">
                            ุงูุชูุตูู ุฅูู ููุชุจ ุงูุจุฑูุฏ
                        </label>
                    </div>

                    <div id="homeDeliveryFields">
                        <div class="form-group">
                            <label for="commune">ุงูุจูุฏูุฉ:</label>
                            <input type="text" id="commune" name="commune" required>
                        </div>
                    </div>
                </section>

                <section class="form-section">
                    <h2>ููุฎุต ุงูุทูุจ</h2>
                    <div class="order-summary">
                        <div id="orderItems">
                            <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑุจุช -->
                        </div>
                        <div class="summary-row">
                            <span>ุงููุฌููุน ุงูุฌุฒุฆู:</span>
                            <span id="subtotal">0 ุฏ.ุฌ</span>
                        </div>
                        <div class="summary-row">
                            <span>ุชูููุฉ ุงูุชูุตูู:</span>
                            <span id="deliveryCost">0 ุฏ.ุฌ</span>
                        </div>
                        <div class="summary-row total">
                            <span>ุงููุฌููุน ุงูููู:</span>
                            <span id="total">0 ุฏ.ุฌ</span>
                        </div>
                    </div>
                </section>

                <button type="submit" class="submit-order-btn">ุชุฃููุฏ ุงูุทูุจ</button>
            </form>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        // ููุฏ ุฎุงุต ุจุตูุญุฉ ุงูุฏูุน
        document.addEventListener('DOMContentLoaded', function() {
            loadCartFromStorage();
            updateOrderSummary();
            
            // ุชุบููุฑ ุญููู ุงูุชูุตูู ุจูุงุกู ุนูู ุทุฑููุฉ ุงูุชูุตูู ุงููุฎุชุงุฑุฉ
            const deliveryMethodRadios = document.querySelectorAll('input[name="deliveryMethod"]');
            const homeDeliveryFields = document.getElementById('homeDeliveryFields');
            
            deliveryMethodRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'home') {
                        homeDeliveryFields.style.display = 'block';
                        document.getElementById('commune').required = true;
                        document.getElementById('address').required = true;
                    } else {
                        homeDeliveryFields.style.display = 'none';
                        document.getElementById('commune').required = false;
                        document.getElementById('address').required = false;
                    }
                    updateDeliveryCost();
                });
            });

            // ุชุญุฏูุซ ุชูููุฉ ุงูุชูุตูู ุนูุฏ ุชุบููุฑ ุงูููุงูุฉ ุฃู ุทุฑููุฉ ุงูุชูุตูู
            document.getElementById('wilaya').addEventListener('change', updateDeliveryCost);
            
            // ุฅุฑุณุงู ุงููููุฐุฌ
            document.getElementById('checkoutForm').addEventListener('submit', function(e) {
                e.preventDefault();
                submitOrder();
            });
        });

        // ุฃุณุนุงุฑ ุงูุชูุตูู ููู ููุงูุฉ
        const deliveryPrices = {
            "Adrar": { home: 1450, office: 1070 },
            "Chlef": { home: 850, office: 570 },
            "Laghouat": { home: 950, office: 670 },
            "Oum El Bouaghi": { home: 800, office: 570 },
            "Batna": { home: 900, office: 570 },
            "Bejaia": { home: 900, office: 570 },
            "Biskra": { home: 950, office: 670 },
            "Bechar": { home: 1200, office: 770 },
            "Blida": { home: 700, office: 520 },
            "Bouira": { home: 750, office: 570 },
            "Tamanrasset": { home: 1650, office: 1270 },
            "Tebessa": { home: 950, office: 570 },
            "Tlemcen": { home: 900, office: 570 },
            "Tiaret": { home: 850, office: 520 },
            "Tizi Ouzou": { home: 750, office: 570 },
            "Alger": { home: 600, office: 520 },
            "Djelfa": { home: 950, office: 670 },
            "Jijel": { home: 900, office: 570 },
            "Sรฉtif": { home: 850, office: 570 },
            "Saida": { home: 900, office: 620 },
            "Skikda": { home: 900, office: 570 },
            "Sidi Bel Abbรจs": { home: 900, office: 570 },
            "Annaba": { home: 900, office: 570 },
            "Guelma": { home: 850, office: 570 },
            "Constantine": { home: 850, office: 570 },
            "Medea": { home: 850, office: 570 },
            "Mostaganem": { home: 900, office: 570 },
            "M'Sila": { home: 900, office: 570 },
            "Mascara": { home: 900, office: 570 },
            "Ouargla": { home: 1000, office: 670 },
            "Oran": { home: 850, office: 570 },
            "El Bayadh": { home: 1100, office: 670 },
            "Illizi": { home: 0, office: 0 },
            "Bordj Bou Arreridj": { home: 850, office: 570 },
            "Boumerdes": { home: 500, office: 420 },
            "El Tarf": { home: 900, office: 570 },
            "Tindouf": { home: 0, office: 0 },
            "Tissemsilt": { home: 900, office: 520 },
            "El Oued": { home: 1000, office: 670 },
            "Khenchela": { home: 900, office: 0 },
            "Souk Ahras": { home: 900, office: 570 },
            "Tipaza": { home: 800, office: 570 },
            "Mila": { home: 900, office: 570 },
            "Ain Defla": { home: 900, office: 570 },
            "Naama": { home: 1200, office: 670 },
            "Ain Temouchent": { home: 900, office: 570 },
            "Ghardaia": { home: 950, office: 670 },
            "Relizane": { home: 900, office: 570 },
            "Timimoun": { home: 1450, office: 0 },
            "Bordj Badji Mokhtar": { home: 0, office: 0 },
            "Ouled Djellal": { home: 950, office: 670 },
            "Bรฉni Abbรจs": { home: 1100, office: 1070 },
            "In Salah": { home: 1650, office: 0 },
            "In Guezzam": { home: 1650, office: 0 },
            "Touggourt": { home: 950, office: 670 },
            "Djanet": { home: 0, office: 0 },
            "M'Ghair": { home: 950, office: 0 },
            "Meniaa": { home: 1100, office: 0 }
        };

        function updateOrderSummary() {
            const orderItemsContainer = document.getElementById('orderItems');
            const subtotalElement = document.getElementById('subtotal');
            const savedCart = JSON.parse(localStorage.getItem('cart')) || [];
            
            let subtotal = 0;
            orderItemsContainer.innerHTML = '';
            
            savedCart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                const itemElement = document.createElement('div');
                itemElement.className = 'summary-row';
                itemElement.innerHTML = `
                    <span>${item.name} (${item.quantity} ร ${item.price} ุฏ.ุฌ)</span>
                    <span>${itemTotal} ุฏ.ุฌ</span>
                `;
                orderItemsContainer.appendChild(itemElement);
            });
            
            subtotalElement.textContent = `${subtotal} ุฏ.ุฌ`;
            updateDeliveryCost();
        }

        function updateDeliveryCost() {
            const deliveryCostElement = document.getElementById('deliveryCost');
            const totalElement = document.getElementById('total');
            const subtotal = parseInt(document.getElementById('subtotal').textContent) || 0;
            const wilaya = document.getElementById('wilaya').value;
            const deliveryMethod = document.querySelector('input[name="deliveryMethod"]:checked').value;
            
            let deliveryCost = 0;
            
            if (wilaya && deliveryPrices[wilaya]) {
                deliveryCost = deliveryPrices[wilaya][deliveryMethod] || 0;
            }
            
            deliveryCostElement.textContent = `${deliveryCost} ุฏ.ุฌ`;
            totalElement.textContent = `${subtotal + deliveryCost} ุฏ.ุฌ`;
        }

        function submitOrder() {
            const form = document.getElementById('checkoutForm');
            const formData = new FormData(form);
            const savedCart = JSON.parse(localStorage.getItem('cart')) || [];
            const subtotal = parseInt(document.getElementById('subtotal').textContent) || 0;
            const deliveryCost = parseInt(document.getElementById('deliveryCost').textContent) || 0;
            const total = subtotal + deliveryCost;
            
            // ุชุฌููุน ุจูุงูุงุช ุงูุทูุจ
            const orderData = {
                customer: {
                    firstName: formData.get('firstName'),
                    
                    phone: formData.get('phone'),
                    secondaryPhone: formData.get('secondaryPhone')
                },
                delivery: {
                    wilaya: formData.get('wilaya'),
                    method: formData.get('deliveryMethod'),
                    commune: formData.get('commune')
                    
                },
                items: savedCart,
                prices: {
                    subtotal: subtotal,
                    delivery: deliveryCost,
                    total: total
                }
            };
            
            // ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ููุจ ููู
            sendOrderToDiscord(orderData);
            
            // ูุณุญ ุงูุณูุฉ ุจุนุฏ ุฅุชูุงู ุงูุทูุจ
            localStorage.removeItem('cart');
            updateCartCount();
            
            // ุฅุธูุงุฑ ุฑุณุงูุฉ ูุฌุงุญ (ููููู ุชูุฌูู ุงูุนููู ุฅูู ุตูุญุฉ ุดูุฑ ููุง)
            alert('ุชู ุฅุฑุณุงู ุทูุจู ุจูุฌุงุญ! ุณูุชุตู ุจู ูุฑูุจุงู ูุชุฃููุฏ ุงูุชูุงุตูู.');
        }

        function sendOrderToDiscord(orderData) {
            const webhookUrl = 'https://canary.discord.com/api/webhooks/1381563915087122523/5MwmHdsh2tnNr7bfi7QnoZYpN2rayaK2psuOMrQ0CffvPJLUE5pV_ltIy3-0IFcY0RTw';
            
            // ุชูุณูู ุฑุณุงูุฉ Discord
            let itemsText = orderData.items.map(item => 
                `- ${item.name} (${item.color}ุ ${item.size}) ร ${item.quantity} = ${item.price * item.quantity} ุฏ.ุฌ`
            ).join('\n');
            
            let deliveryText = orderData.delivery.method === 'home' ?
                `ุงูุชูุตูู ุฅูู ุงูููุฒู
                ุงูุจูุฏูุฉ: ${orderData.delivery.commune}` :

                `ุงูุชูุตูู ุฅูู ููุชุจ ุงูุจุฑูุฏ`;
            
            const embed = {
                title: "ุทูุจ ุฌุฏูุฏ ๐ฆ",
                color: 0x0099ff,
                fields: [
                    {
                        name: "ูุนูููุงุช ุงูุนููู",
                        value: `ุงูุงุณู: ${orderData.customer.firstName}
                                ุงููุงุชู: ${orderData.customer.phone}
                                ุงููุงุชู ุงูุงุญุชูุงุทู: ${orderData.customer.secondaryPhone || 'ุบูุฑ ูุชููุฑ'}`,
                        inline: false
                    },
                    {
                        name: "ูุนูููุงุช ุงูุชูุตูู",
                        value: `ุงูููุงูุฉ: ${orderData.delivery.wilaya}
                                ${deliveryText}`,
                        inline: false
                    },
                    {
                        name: "ุงูููุชุฌุงุช",
                        value: itemsText,
                        inline: false
                    },
                    {
                        name: "ุงููุงุชูุฑุฉ",
                        value: `ุงููุฌููุน ุงูุฌุฒุฆู: ${orderData.prices.subtotal} ุฏ.ุฌ
                                ุชูููุฉ ุงูุชูุตูู: ${orderData.prices.delivery} ุฏ.ุฌ
                                **ุงููุฌููุน ุงูููู: ${orderData.prices.total} ุฏ.ุฌ**`,
                        inline: false
                    }
                ],
                timestamp: new Date().toISOString()
            };
            
            fetch(webhookUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    embeds: [embed]
                })
            });
        }
    </script>
</body>
</html>
